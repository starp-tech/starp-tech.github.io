<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>starpy app - collaborative media sharing player watch video online together chat offline full privacy</title>
  <link rel="icon" href="favicon.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="starpy app - collaborative media sharing video player online, offline and private">
	<meta name=”robots” content="index, follow">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha512-2cbsQGdowNDPcKuoBd2bCcsJky87Mv0LEtD/nunJUgk6MOYTgVMGihS/xCEghNf04DPhNiJ4DZw5BxDd1uyOdw==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/webtorrent/1.9.6/webtorrent.min.js" integrity="sha512-XF9ds+vUoIZQm451mANDmt7l9JeuCrNWNwSFjQrtp6Vsme9+qlCanROSUNrskIAtJhMEghJ+u3HdxGNB/FcG+w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/nav.css">
  <link rel="stylesheet" href="minimal-pace.css">
</head>
<body>
  <!-- <div class="nav-container"> -->
    <div class="burger-container" @click="toggleBurger">
        <div class="menu-button">
            <div class="menu-icon">
               <span></span>
               <span></span>
               <span></span>
               <span></span>
            </div>
        </div>
    </div>
		<div class="sys-nav">
      <a 
	      href="#" 
	      id="starpyLoginButton" 
	      class="sys-nav-item">
	    	LOGIN / REGISTER
    	</a>
      <a href="#" 
				 id="fileHackingSelectButton2"
				 class="sys-nav-item"
			>UPLOAD FILE</a>
      <a id="joinParty2" class="sys-nav-item">JOIN RANDOM PARTY</a>
      <a class="sys-nav-item"
      	href="https://github.com/starp-tech" 
      	target="_blank">
      	<ion-icon name="logo-github"></ion-icon>
      </a>

		</div>
  <!-- </div> -->
	<canvas id="bgCanvas"></canvas>
	<canvas id="terCanvas"></canvas>
	<script type="text/javascript" src="js/anim.js">
	</script>
	<div class="pageContainer" id="introContainer">
		<div class="background-overlay" style="
			background-color: rgba(0,0,0,0.1);
		"></div>
		<div class="container parent-vertical heading-info">
			<div class="jumbotron">
			  	<div class="container">
				  	<h1>Starpy</h1>
				  	<p 
				  		class="big-message" 
				  		id="leaveWarning"
				  	>Same stars experience.</p>
				  	<a class="hidden" id="joinButton" href="#">
				  		Join  
				  	</a>
				  	</div>
			  	</div>
			</div>
		</div>

    <div class="sys-intro-arrow">
    	<a class="chevron bottom" href="#platform">
	    </a>
    </div>
	</div>

	<div class="pageContainer" 
		id="platform" 
		style="background-image: url(img/fr.jpeg);"
	>
    <div class="sys-intro-arrow">
    	<a class="chevron bottom" href="#privacy">
	    </a>
    </div>
		<div class="background-overlay" style="
			background-color: rgba(0,0,0,0.5);
		"></div>
		<div class="container parent-vertical heading-info">
			<div class="jumbotron">
			  	<div class="container">
				  	<h1>
				  		Connect, Chat <br> & Share 4K Media
				  	</h1>
				  	<p class="big-message">
				  		in a realtime party <br> with a magic link
					  </p>
				  	<a id="joinParty" class="joinButton">
				  		JOIN RANDOM PARTY
				  	</a>
				  	</div>
			  	</div>
			</div>
		</div>
	</div>

	<div class="pageContainer" 
		id="privacy" 
		style="
			background-image: url(img/privacy1.jpeg);
			background-position: right;
		"
	>
    <div class="sys-intro-arrow">
    	<a class="chevron bottom" href="#hacking">
	    </a>
    </div>
		<div class="background-overlay" style="
			background-color: rgba(0,0,0,0.4);
		"></div>
		<div class="container parent-vertical heading-info">
			<div class="jumbotron">
			  	<div class="container">
				  	<h1 style="color:palegoldenrod;">Ultimate <br> Privacy</h1>
				  	<p class="big-message" style="color:palegoldenrod;">
				  	no registration required<br> transparent p2p encryption
				  	</p>
				  	<a class="joinButton" target="blank" href="https://github.com/margelo/react-native-quick-crypto">
				  		Learn More About Encryption
				  	</a>
				  	</div>
			  	</div>
			</div>
		</div>
	</div>

	<div class="pageContainer"
		id="hacking" 
		style="
			background-image: url(img/cloud1.jpeg);
			background-position: right;
		"
	>
    <div class="sys-intro-arrow">
    	<a class="chevron bottom" href="#connect">
	    </a>
    </div>
		<div class="background-overlay" style="
			background-color: rgba(0,0,0,0.5);
		"></div>
		<input class="hidden" id="hackingFileInput" type="file">
		<div class="container parent-vertical heading-info">
			<div class="jumbotron">
			  	<div class="container">
				  	<h1>Store Your Files</h1>
				  	<p class="big-message">
				  		Try our instant upload for free
				  	</p>
				  	<a 
				  		id="fileHackingSelectButton"
				  		class="joinButton" 
				  		target="blank" 
				  		href="#hacking">
				  		Upload File 
				  	</a>
				  	</div>
			  	</div>
			</div>
		</div>
	</div>

	<div class="pageContainer" 
		id="connect"
		style="background-image: url(img/offline1.jpeg);"
	>
		<div class="background-overlay" style="
			background-color: rgba(0,0,0,0.5);
		"></div>
		<div class="container parent-vertical heading-info">
			<div class="jumbotron">
			  	<div class="container">
				  	<h1>
				  		Offline First
				  	</h1>
				  	<p class="big-message"> Chat
& Share Media <br> with users nearby <br> even when offline</p>
				  	<a class="joinButton" href="https://www.starpy.me/appcast/StarpyApp.tar.xz">Download For Mac OS X</a>
				  	</div>
			  	</div>
			</div>
		</div>
	</div>

	<div 
		class="hidden"
		id="videoContainer"
	>
		<h1 id="partyTitle"></h1>
		<h2 id="videoTitle"></h2>
		<a href="#videoPlayer" class="close" onclick="hideVideoPlayer()"></a>
		<div id="playerPlayButton" onclick="togglePlay()" class="hidden"></div>
  	<a class="chevron left playPrevParty" id="playPrevParty" href="#videoPlayer">
    </a>
  	<a class="chevron right playNextParty" id="playNextParty"  href="#videoPlayer">
    </a>
    <div class="lds-grid"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>

		<video id="videoPlayer" onclick="togglePlay()" src="" autoplay playsinline></video>
	</div>

	<script type="text/javascript" src="js/contact.js">
	</script>
	<script type="text/javascript" src="js/resize.js">
	</script>
	<script type="text/javascript" src="js/socket.js">
	</script>
  </script>
	<script type="text/javascript" src="js/media.js">
	</script>

	<script type="module">
	  // Import the functions you need from the SDKs you need
	  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
	  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
		import { 
			getAuth, 
			isSignInWithEmailLink, 
			sendSignInLinkToEmail,
			signInWithEmailLink,
			signInWithPopup, 
			GoogleAuthProvider  
		} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
	  // TODO: Add SDKs for Firebase products that you want to use
	  // https://firebase.google.com/docs/web/setup#available-libraries

	  // Your web app's Firebase configuration
	  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
	  const firebaseConfig = {
	    apiKey: "AIzaSyAdmg-M42WaSQacbWa_-45mnhLPl5agzBE",
	    authDomain: "starpy.me",
	    projectId: "starpy",
	    storageBucket: "starpy.appspot.com",
	    messagingSenderId: "1012103782424",
	    appId: "1:1012103782424:web:119d7746a26fbbe688636d",
	    measurementId: "G-TGXM40S8J8"
	  };

	  // Initialize Firebase
	  const app = initializeApp(firebaseConfig);
	  const analytics = getAnalytics(app);
	  const auth = getAuth(app)

		const actionCodeSettings = {
		  url: 'https://www.starpy.me/?userId=1234',
		  // This must be true.
		  handleCodeInApp: true
		};
		let linkSent = false;
		const signInWithEmail = async () => {
			
			if(linkSent)
				return

			const emailInput = document.getElementById("emailInput")
			console.info('==== try email ====')

		  let email = emailInput.value
		  
		  console.info(email)

		  if (!email) {
		    email = window.prompt('Please provide your email for confirmation');
		  }

			try {
		  	await sendSignInLinkToEmail(auth, email, actionCodeSettings)
		  	console.info('==== after succesfully send email =====')
		    window.localStorage.setItem('emailForSignIn', email);
			} catch(err) {
				console.error(err)
				a.innerHTML = err.message.toLowerCase().replace("firebase", "starpy")
				setTimeout(()=>{
					linkSent = false
			    a.innerHTML = "Send Magic Link"
				}, 3000)
				return 
			}
			a.innerHTML = "Check Your Email"
		}

    const checkAuthOnMount = async () => {
      if (isSignInWithEmailLink(auth, window.location.href)) {
        let email = window.localStorage.getItem('emailForSignIn');
        if (!email) {
          email = window.prompt('Please provide your email for confirmation');
        }
        const result = await signInWithEmailLink(auth, email, window.location.href)
        localStorage.setItem('authData', JSON.stringify(result))
        window.location = "https://starpy.me/webapp"
        console.info('===== succesfully loggedin with email link ====', result)
      }
    }
    checkAuthOnMount()

    const starpyLoginButton = document.getElementById("starpyLoginButton")
    // const 
    let isLoginFormEnabled = false
    starpyLoginButton.addEventListener("click", (e)=>{
    	isLoginFormEnabled = true;
	    leaveWarning.innerHTML = 
	    	'<input type="email" id="emailInput" placeholder="enter your email">'
	    a.innerHTML = "Send Magic Link"
    	document.getElementById("emailInput").focus()
    	a.href = "#"
    	a.onclick = (e) => {
    		signInWithEmail()
    		if(e) {
    			return e.preventDefault()
    		}
    	}
	  })
	</script>
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>